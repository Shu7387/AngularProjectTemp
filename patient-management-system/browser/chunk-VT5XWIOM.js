import{A as N,B as ae,C as re,b as G,c as _,d as z,e as J,i as K,j as W,n as X,o as Y,p as Z,q as ee,r as te,s as ie,x as ne,z as oe}from"./chunk-CHRXKQJA.js";import{f as q,g as U,h as V,o as A}from"./chunk-63D4ALCY.js";import{$ as k,$a as c,Ba as E,Fa as y,G as P,Ka as f,Qa as p,Ra as e,Sa as t,Ta as s,V as u,W as g,Ya as T,ab as b,bb as L,cb as H,db as R,eb as B,f as $,fb as v,gb as C,ib as Q,jb as I,lb as a,mb as S,nb as h,ob as F,sb as j,ta as m}from"./chunk-ZAWNPOR3.js";var de=["cardAction"],ce=[[["","card-header",""]],"*"],ue=["[card-header]","*"],w=class l{appointment;cardClicked=new k;cardAction;isHighlighted=!1;ngAfterContentInit(){if(!this.cardAction)return;this.cardAction.nativeElement.title="Click to trigger card action";let i=()=>{console.log("Projected action clicked!")};this.cardAction.nativeElement.addEventListener("click",i)}highlight(){this.isHighlighted=!0,setTimeout(()=>this.isHighlighted=!1,2e3)}getCardClass(){return`border-${this.getColorForType()}`}getColorForType(){switch(this.appointment.type){case"Emergency":return"danger";case"Surgery":return"warning";case"Follow-up":return"info";default:return"primary"}}getStatusClass(){switch(this.appointment.status){case"Confirmed":return"bg-success";case"Completed":return"bg-secondary";case"Cancelled":return"bg-danger";default:return"bg-primary"}}onClick(){this.cardClicked.emit(this.appointment)}static \u0275fac=function(n){return new(n||l)};static \u0275cmp=y({type:l,selectors:[["app-appointment-card"]],contentQueries:function(n,o,r){if(n&1&&R(r,de,5),n&2){let d;v(d=C())&&(o.cardAction=d.first)}},inputs:{appointment:"appointment"},outputs:{cardClicked:"cardClicked"},ngContentSelectors:ue,decls:21,vars:10,consts:[[1,"appointment-card",3,"click","ngClass"],[1,"card-header"],[1,"card-body"],[1,"mb-2"],[1,"appointment-details"],[1,"bi","bi-clock"],[1,"bi","bi-hospital"],[1,"bi","bi-tag"],[1,"badge",3,"ngClass"]],template:function(n,o){n&1&&(L(ce),e(0,"div",0),c("click",function(){return o.onClick()}),e(1,"div",1),H(2),t(),e(3,"div",2)(4,"h6",3),a(5),t(),e(6,"div",4)(7,"small"),s(8,"i",5),a(9),t(),s(10,"br"),e(11,"small"),s(12,"i",6),a(13),t(),s(14,"br"),e(15,"small"),s(16,"i",7),a(17),t()(),e(18,"span",8),a(19),t(),H(20,1),t()()),n&2&&(I("highlighted",o.isHighlighted),p("ngClass",o.getCardClass()),m(5),S(o.appointment.patientName),m(4),F(" ",o.appointment.appointmentTime," (",o.appointment.duration,"min) "),m(4),h(" Room ",o.appointment.roomNumber||"TBD"," "),m(4),h(" ",o.appointment.type," "),m(),p("ngClass",o.getStatusClass()),m(),S(o.appointment.status))},dependencies:[A,q],encapsulation:2})};function ge(l,i){l&1&&(e(0,"span",3),a(1,"Booked"),t())}var x=class l{slot;slotClicked=new k;get isAvailable(){return this.slot.available}get isBooked(){return!this.slot.available}isSelected=!1;get cursor(){return this.slot.available?"pointer":"not-allowed"}get opacity(){return this.slot.available?"1":"0.5"}bgColor="#fff";transform="scale(1)";onClick(){this.slot.available&&(this.isSelected=!this.isSelected,this.slotClicked.emit(this.slot),console.log(`\u23F0 Time slot clicked: ${this.slot.time}`))}onMouseEnter(){this.slot.available&&(this.bgColor="#e7f3ff",this.transform="scale(1.05)")}onMouseLeave(){this.bgColor="#fff",this.transform="scale(1)"}onDoubleClick(){this.slot.available&&console.log(`\u26A1 Double-clicked on slot: ${this.slot.time}`)}static \u0275fac=function(n){return new(n||l)};static \u0275cmp=y({type:l,selectors:[["app-time-slot"]],hostVars:14,hostBindings:function(n,o){n&1&&c("click",function(){return o.onClick()})("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()})("dblclick",function(){return o.onDoubleClick()}),n&2&&(Q("cursor",o.cursor)("opacity",o.opacity)("background-color",o.bgColor)("transform",o.transform),I("available",o.isAvailable)("booked",o.isBooked)("selected",o.isSelected))},inputs:{slot:"slot"},outputs:{slotClicked:"slotClicked"},decls:4,vars:2,consts:[[1,"time-slot-content"],[1,"time"],["class","badge bg-danger ms-2",4,"ngIf"],[1,"badge","bg-danger","ms-2"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"span",1),a(2),t(),f(3,ge,2,0,"span",2),t()),n&2&&(m(2),S(o.slot.time),m(),p("ngIf",!o.slot.available))},dependencies:[A,V],styles:["[_nghost-%COMP%]{display:block;padding:10px;border:2px solid #dee2e6;border-radius:5px;text-align:center;transition:all .3s}.time[_ngcontent-%COMP%]{font-weight:600}"]})};var he=["appointmentForm"],fe=["selectedDateInput"],ve=["todaySchedule"];function Ce(l,i){if(l&1){let n=T();e(0,"div",60),s(1,"i",61),a(2),e(3,"button",62),c("click",function(){u(n);let r=b();return g(r.successMessage=null)}),t()()}if(l&2){let n=b();m(2),h(" ",n.successMessage," ")}}function be(l,i){if(l&1){let n=T();e(0,"div",63),s(1,"i",64),a(2),e(3,"button",62),c("click",function(){u(n);let r=b();return g(r.errorMessage=null)}),t()()}if(l&2){let n=b();m(2),h(" ",n.errorMessage," ")}}function Se(l,i){if(l&1&&(e(0,"option",65),a(1),t()),l&2){let n=i.$implicit;p("value",n.id),m(),F(" ",n.firstName," ",n.lastName," ")}}function _e(l,i){if(l&1&&(e(0,"option",65),a(1),t()),l&2){let n=i.$implicit;p("value",n),m(),S(n)}}function ye(l,i){if(l&1){let n=T();e(0,"app-time-slot",66),c("slotClicked",function(r){u(n);let d=b();return g(d.onTimeSlotClick(r))}),t()}if(l&2){let n=i.$implicit;p("slot",n)}}function Ae(l,i){l&1&&(e(0,"div",67),s(1,"i",68),e(2,"p",69),a(3,"No appointments scheduled for today"),t()())}function Ee(l,i){if(l&1&&(e(0,"p",74),s(1,"i",75),a(2),t()),l&2){let n=b().$implicit;m(2),h(" ",n.notes," ")}}function Te(l,i){if(l&1&&(e(0,"app-appointment-card",70,2)(2,"div",71),s(3,"i",72),a(4),t(),f(5,Ee,3,1,"p",73),t()),l&2){let n=i.$implicit;p("appointment",n),m(4),h(" Dr. ",n.doctorName),m(),p("ngIf",n.notes)}}function we(l,i){l&1&&(e(0,"div",67),s(1,"i",68),e(2,"p",69),a(3,"No upcoming appointments"),t()())}function xe(l,i){if(l&1&&(e(0,"app-appointment-card",70)(1,"div",71),s(2,"i",76),a(3),t(),e(4,"div",69)(5,"small",29),s(6,"i",77),a(7),t()()()),l&2){let n=i.$implicit;p("appointment",n),m(3),h(" ",n.appointmentDate),m(4),h(" Dr. ",n.doctorName," ")}}var pe=class l{constructor(i,n,o,r){this.fb=i;this.patientService=n;this.authService=o;this.logger=r;console.log("\u{1F4C5} AppointmentsComponent instantiated")}appointmentFormElement;dateInput;todayScheduleCard;allAppointmentCards;timeSlots;appointments=[];patients=[];appointmentForm;selectedDate="";availableTimeSlots=[];isLoading=!1;errorMessage=null;successMessage=null;currentDoctorName="";destroy$=new $;appointmentTypes=["Consultation","Follow-up","Emergency","Surgery"];appointmentStatuses=["Scheduled","Confirmed","Completed","Cancelled"];ngOnInit(){this.logger.log("AppointmentsComponent initialized");let i=this.authService.getCurrentUser();this.currentDoctorName=i?.fullName||"Dr. Unknown",this.initializeForm(),this.selectedDate=new Date().toISOString().split("T")[0],this.appointmentForm.patchValue({appointmentDate:this.selectedDate}),this.loadPatients(),this.loadAppointments(),this.generateTimeSlots()}ngAfterViewInit(){console.log("\u{1F441}\uFE0F ngAfterViewInit: View and child components initialized"),this.logger.log("ViewChild and ViewChildren are now available"),this.appointmentFormElement&&console.log("\u2705 ViewChild: Form element accessed",this.appointmentFormElement.nativeElement),this.allAppointmentCards&&console.log("\u2705 ViewChildren: Found appointment cards:",this.allAppointmentCards.length)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.appointmentForm=this.fb.group({patientId:["",_.required],appointmentDate:["",_.required],appointmentTime:["",_.required],duration:[30,[_.required,_.min(15)]],type:["Consultation",_.required],notes:[""],roomNumber:[""]})}loadPatients(){this.patientService.getAllPatients().pipe(P(this.destroy$)).subscribe({next:i=>{this.patients=i,this.logger.log(`Loaded ${i.length} patients`)},error:i=>{this.errorMessage="Failed to load patients",this.logger.error(i.message)}})}loadAppointments(){this.appointments=this.getMockAppointments(),this.logger.log(`Loaded ${this.appointments.length} appointments`)}generateTimeSlots(){let i=[];for(let r=9;r<17;r++)for(let d=0;d<60;d+=30){let M=`${r.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`,O=this.appointments.some(D=>D.appointmentDate===this.selectedDate&&D.appointmentTime===M);i.push({time:M,available:!O,appointmentId:O?this.appointments.find(D=>D.appointmentTime===M)?.id:void 0})}this.availableTimeSlots=i}onSubmit(){if(this.appointmentForm.invalid){Object.keys(this.appointmentForm.controls).forEach(r=>{this.appointmentForm.get(r)?.markAsTouched()});return}let i=this.appointmentForm.value,n=this.patients.find(r=>r.id==i.patientId);if(!n){this.errorMessage="Patient not found";return}let o={id:this.appointments.length+1,patientId:n.id,patientName:`${n.firstName} ${n.lastName}`,doctorName:this.currentDoctorName,appointmentDate:i.appointmentDate,appointmentTime:i.appointmentTime,duration:i.duration,type:i.type,status:"Scheduled",notes:i.notes,roomNumber:i.roomNumber};this.appointments.push(o),this.successMessage="Appointment scheduled successfully!",this.appointmentForm.reset(),this.appointmentForm.patchValue({duration:30,type:"Consultation",appointmentDate:this.selectedDate}),this.generateTimeSlots(),this.logger.log(`Appointment created: ${o.patientName}`),setTimeout(()=>this.successMessage=null,3e3)}onDateChange(){this.selectedDate=this.appointmentForm.get("appointmentDate")?.value,this.generateTimeSlots(),this.logger.log(`Date changed to: ${this.selectedDate}`)}onTimeSlotClick(i){i.available&&(this.appointmentForm.patchValue({appointmentTime:i.time}),this.logger.log(`Time slot selected: ${i.time}`))}highlightTodaySchedule(){this.todayScheduleCard&&(this.todayScheduleCard.highlight(),this.logger.log("Today schedule highlighted via ViewChild"))}highlightAllAppointments(){if(this.allAppointmentCards){let i=0;this.allAppointmentCards.forEach(n=>{n.highlight(),i++}),this.logger.log(`Highlighted ${i} appointment cards via ViewChildren`),alert(`Highlighted ${i} appointment cards via ViewChildren`)}}getAppointmentCardsInfo(){if(this.allAppointmentCards){let i={total:this.allAppointmentCards.length,first:this.allAppointmentCards.first,last:this.allAppointmentCards.last};console.log("\u{1F4CA} Appointment Cards Info (ViewChildren):",i),alert(`Total appointment cards: ${i.total}`)}}focusDateInput(){this.dateInput&&(this.dateInput.nativeElement.focus(),this.logger.log("Date input focused via ViewChild ElementRef"))}resetFormViaViewChild(){this.appointmentFormElement&&(this.appointmentFormElement.nativeElement.reset(),this.initializeForm(),this.logger.log("Form reset via ViewChild"))}getAppointmentsForDate(i){return this.appointments.filter(n=>n.appointmentDate===i)}getTodayAppointments(){let i=new Date().toISOString().split("T")[0];return this.getAppointmentsForDate(i)}getUpcomingAppointments(){let i=new Date().toISOString().split("T")[0];return this.appointments.filter(n=>n.appointmentDate>=i)}getStatusBadgeClass(i){switch(i){case"Scheduled":return"bg-primary";case"Confirmed":return"bg-success";case"Completed":return"bg-secondary";case"Cancelled":return"bg-danger";default:return"bg-info"}}getMockAppointments(){let i=new Date().toISOString().split("T")[0];return[{id:1,patientId:1,patientName:"John Doe",doctorName:this.currentDoctorName,appointmentDate:i,appointmentTime:"09:00",duration:30,type:"Consultation",status:"Confirmed",notes:"Regular checkup",roomNumber:"101"},{id:2,patientId:2,patientName:"Jane Smith",doctorName:this.currentDoctorName,appointmentDate:i,appointmentTime:"10:30",duration:45,type:"Follow-up",status:"Scheduled",notes:"Diabetes follow-up",roomNumber:"102"}]}static \u0275fac=function(n){return new(n||l)(E(ne),E(ae),E(re),E(N))};static \u0275cmp=y({type:l,selectors:[["app-appointments"]],viewQuery:function(n,o){if(n&1&&B(he,5)(fe,5)(ve,5)(w,5)(x,5),n&2){let r;v(r=C())&&(o.appointmentFormElement=r.first),v(r=C())&&(o.dateInput=r.first),v(r=C())&&(o.todayScheduleCard=r.first),v(r=C())&&(o.allAppointmentCards=r),v(r=C())&&(o.timeSlots=r)}},features:[j([N])],decls:153,vars:12,consts:[["appointmentFormElement",""],["selectedDateInput",""],["todaySchedule",""],[1,"appointments-container","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"bi","bi-calendar-check"],[1,"text-muted","mb-0"],[1,"btn","btn-info","btn-sm","me-2",3,"click"],[1,"bi","bi-lightbulb"],[1,"btn","btn-warning","btn-sm","me-2",3,"click"],[1,"bi","bi-stars"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"bi","bi-info-circle"],["class","alert alert-success alert-dismissible fade show",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show",4,"ngIf"],[1,"row"],[1,"col-lg-5"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"bi","bi-plus-circle"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["formControlName","patientId",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date","formControlName","appointmentDate",1,"form-control",3,"change"],[1,"text-muted"],["type","time","formControlName","appointmentTime",1,"form-control"],["type","number","formControlName","duration","min","15","step","15",1,"form-control"],["formControlName","type",1,"form-select"],["type","text","formControlName","roomNumber","placeholder","e.g., 101",1,"form-control"],["formControlName","notes","rows","2",1,"form-control"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bi","bi-calendar-plus"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-arrow-counterclockwise"],["type","button",1,"btn","btn-outline-info","btn-sm","ms-auto",3,"click"],[1,"bi","bi-cursor"],[1,"card","mt-4"],[1,"card-header","bg-info","text-white"],[1,"bi","bi-clock"],[1,"float-end"],[1,"time-slots-grid"],[3,"slot","slotClicked",4,"ngFor","ngForOf"],[1,"col-lg-7"],[1,"card","mb-4"],[1,"card-header","bg-success","text-white"],[1,"bi","bi-calendar-day"],["class","text-center text-muted py-3",4,"ngIf"],[3,"appointment",4,"ngFor","ngForOf"],[1,"card-header","bg-warning"],[1,"bi","bi-calendar2-range"],[1,"card-body",2,"max-height","400px","overflow-y","auto"],[1,"card","mt-4","bg-light"],[1,"col-md-3"],[1,"small","mb-0"],[1,"alert","alert-success","alert-dismissible","fade","show"],[1,"bi","bi-check-circle"],["type","button",1,"btn-close",3,"click"],[1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"bi","bi-exclamation-triangle"],[3,"value"],[3,"slotClicked","slot"],[1,"text-center","text-muted","py-3"],[1,"bi","bi-calendar-x","display-4"],[1,"mt-2"],[3,"appointment"],["card-header",""],[1,"bi","bi-person-circle"],["class","mb-0 mt-2 small text-muted",4,"ngIf"],[1,"mb-0","mt-2","small","text-muted"],[1,"bi","bi-journal-text"],[1,"bi","bi-calendar-event"],[1,"bi","bi-person"]],template:function(n,o){if(n&1){let r=T();e(0,"div",3)(1,"div",4)(2,"div")(3,"h2"),s(4,"i",5),a(5," Appointment Scheduling"),t(),e(6,"p",6),a(7,"Phase 3: Advanced Component Features Demo"),t()(),e(8,"div")(9,"button",7),c("click",function(){return u(r),g(o.highlightTodaySchedule())}),s(10,"i",8),a(11," Highlight Today "),t(),e(12,"button",9),c("click",function(){return u(r),g(o.highlightAllAppointments())}),s(13,"i",10),a(14," Highlight All "),t(),e(15,"button",11),c("click",function(){return u(r),g(o.getAppointmentCardsInfo())}),s(16,"i",12),a(17," ViewChildren Info "),t()()(),f(18,Ce,4,1,"div",13)(19,be,4,1,"div",14),e(20,"div",15)(21,"div",16)(22,"div",17)(23,"div",18)(24,"h5",19),s(25,"i",20),a(26," Schedule New Appointment"),t()(),e(27,"div",21)(28,"form",22,0),c("ngSubmit",function(){return u(r),g(o.onSubmit())}),e(30,"div",23)(31,"label",24),a(32,"Patient *"),t(),e(33,"select",25)(34,"option",26),a(35,"Select Patient"),t(),f(36,Se,2,3,"option",27),t()(),e(37,"div",23)(38,"label",24),a(39,"Appointment Date *"),t(),e(40,"input",28,1),c("change",function(){return u(r),g(o.onDateChange())}),t(),e(42,"small",29),s(43,"i",12),a(44," ViewChild: Date input reference "),t()(),e(45,"div",23)(46,"label",24),a(47,"Time *"),t(),s(48,"input",30),t(),e(49,"div",23)(50,"label",24),a(51,"Duration (minutes) *"),t(),s(52,"input",31),t(),e(53,"div",23)(54,"label",24),a(55,"Type *"),t(),e(56,"select",32),f(57,_e,2,2,"option",27),t()(),e(58,"div",23)(59,"label",24),a(60,"Room Number"),t(),s(61,"input",33),t(),e(62,"div",23)(63,"label",24),a(64,"Notes"),t(),s(65,"textarea",34),t(),e(66,"div",35)(67,"button",36),s(68,"i",37),a(69," Schedule "),t(),e(70,"button",38),c("click",function(){return u(r),g(o.resetFormViaViewChild())}),s(71,"i",39),a(72," Reset "),t(),e(73,"button",40),c("click",function(){return u(r),g(o.focusDateInput())}),s(74,"i",41),a(75," Focus Date "),t()()()()(),e(76,"div",42)(77,"div",43)(78,"h6",19),s(79,"i",44),a(80),e(81,"small",45),a(82,"@HostListener/@HostBinding Demo"),t()()(),e(83,"div",21)(84,"div",46),f(85,ye,1,1,"app-time-slot",47),t()()()(),e(86,"div",48)(87,"div",49)(88,"div",50)(89,"h5",19),s(90,"i",51),a(91," Today's Schedule "),e(92,"small",45),a(93,"@ViewChild Demo"),t()()(),e(94,"div",21),f(95,Ae,4,0,"div",52)(96,Te,6,3,"app-appointment-card",53),t()(),e(97,"div",17)(98,"div",54)(99,"h5",19),s(100,"i",55),a(101," Upcoming Appointments "),e(102,"small",45),a(103,"@ViewChildren Demo"),t()()(),e(104,"div",56),f(105,we,4,0,"div",52)(106,xe,8,3,"app-appointment-card",53),t()()()(),e(107,"div",57)(108,"div",21)(109,"h6"),s(110,"i",12),a(111," Advanced Features Demonstrated:"),t(),e(112,"div",15)(113,"div",58)(114,"strong"),a(115,"@ViewChild:"),t(),e(116,"ul",59)(117,"li"),a(118,"Form element reference"),t(),e(119,"li"),a(120,"Date input access"),t(),e(121,"li"),a(122,"Today's schedule card"),t()()(),e(123,"div",58)(124,"strong"),a(125,"@ViewChildren:"),t(),e(126,"ul",59)(127,"li"),a(128,"All appointment cards"),t(),e(129,"li"),a(130,"Time slot components"),t(),e(131,"li"),a(132,"QueryList operations"),t()()(),e(133,"div",58)(134,"strong"),a(135,"@ContentChild:"),t(),e(136,"ul",59)(137,"li"),a(138,"Card header projection"),t(),e(139,"li"),a(140,"Card action projection"),t(),e(141,"li"),a(142,"Flexible content slots"),t()()(),e(143,"div",58)(144,"strong"),a(145,"ng-content:"),t(),e(146,"ul",59)(147,"li"),a(148,"Multi-slot projection"),t(),e(149,"li"),a(150,"Header/body slots"),t(),e(151,"li"),a(152,"Flexible layouts"),t()()()()()()()}n&2&&(m(18),p("ngIf",o.successMessage),m(),p("ngIf",o.errorMessage),m(9),p("formGroup",o.appointmentForm),m(8),p("ngForOf",o.patients),m(21),p("ngForOf",o.appointmentTypes),m(10),p("disabled",o.appointmentForm.invalid),m(13),h(" Available Time Slots - ",o.selectedDate," "),m(5),p("ngForOf",o.availableTimeSlots),m(10),p("ngIf",o.getTodayAppointments().length===0),m(),p("ngForOf",o.getTodayAppointments()),m(9),p("ngIf",o.getUpcomingAppointments().length===0),m(),p("ngForOf",o.getUpcomingAppointments()))},dependencies:[A,U,V,oe,K,ee,te,G,W,Z,z,J,ie,Y,X,w,x],encapsulation:2})};export{pe as AppointmentsComponent};
